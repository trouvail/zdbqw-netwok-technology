# 网络技术与应用课程报告

## 第一次实验报告

> **学号：2013921\
姓名：周延霖\
年级：2020级\
专业：信息安全**


## 一、实验内容说明
---

### （1）仿真环境下的共享式以太网组网

**要求如下：**

1. 学习虚拟仿真软件的基本使用方法
2. 在仿真环境下进行单集线器共享式以太网组网，测试网络的连通性
3. 在仿真环境下进行多集线器共享式以太网组网，测试网络的连通性
4. 在仿真环境的`Simulation`方式中观察数据包在共享式以太网中的传递过程，并进行分析

### （2）仿真环境下的交换式以太网组网和VLAN配置

**要求如下：**

1. 在仿真环境下进行单交换机以太网组网，测试网络的连通性
2. 在仿真环境下利用终端方式对交换机进行配置
3. 在单台交换机中划分`VLAN`，测试同一`VLAN`中主机的连通性和不同`VLAN`中主机的连通性，并对现象进行分析
4. 在仿真环境下组建多集线器、多交换机混合式网络。划分跨越交换机的`VLAN`，测试同一`VLAN`中主机的连通性和不同`VLAN`中主机的连通性，并对现象进行分析
5. 在仿真环境的`Simulation`方式中观察数据包在混合式以太网、虚拟局域网中的传递过程，并进行分析
6. 学习仿真环境提供的简化配置方式。


## 二、前期准备
---

在课堂上学习了共享式以太网和交换式以太网的相关概念，以及学习了如何将共享式以太网升级成为交换式以太网，学习了如何让网络分段以及这种提升后所带来的性能优化，然后下载虚拟仿真环境`Cisco Packet Tracer`，接下来在虚拟方针环境下对本此实验的前期准备。

### （1）单集线器
#### 1.拓扑图：

![单集线器拓扑图](https://i.imgtg.com/2022/10/13/JTiwa.png)

#### 2.IP与端口分配：

| PC机 | IPv4 Address | Subnet Mask |
| :---- | :---- | :---- |
| PC1 | 192.168.0.2 | 255.255.255.0 |
| PC2 | 192.168.0.3 | 255.255.255.0 |


### （2）多集线器
#### 1.拓扑图：

![多集线器拓扑图](https://i.imgtg.com/2022/10/13/JT1nS.png)

#### 2.IP与端口分配：

| PC机 | IPv4 Address | Subnet Mask |
| :---- | :---- | :---- |
| PC1 | 192.168.0.2 | 255.255.255.0 |
| PC2 | 192.168.0.3 | 255.255.255.0 |
| PC3 | 192.168.0.4 | 255.255.255.0 |
| PC4 | 192.168.0.5 | 255.255.255.0 |
| PC5 | 192.168.0.6 | 255.255.255.0 |
| PC6 | 192.168.0.7 | 255.255.255.0 |





### （3）单交换机
#### 1.拓扑图：

![单交换机拓扑图](https://i.imgtg.com/2022/10/20/Pqquv.png)

#### 2.IP与端口分配：

| PC机 | IPv4 Address | Subnet Mask | VLAN ID |
| :---- | :---- | :---- | :----: |
| PC1 | 192.168.0.2 | 255.255.255.0 | 1 |
| PC2 | 192.168.0.3 | 255.255.255.0 | 1 |
| PC3 | 192.168.0.4 | 255.255.255.0 | 2 |
| PC4 | 192.168.0.5 | 255.255.255.0 | 2 |
| PC5 | 192.168.0.6 | 255.255.255.0 | 3 |
| PC6 | 192.168.0.7 | 255.255.255.0 | 3 |


### （4）多交换机
#### 1.拓扑图：

![多交换机拓扑图](https://i.imgtg.com/2022/10/20/PTge1.png)

#### 2.IP与端口分配：

| PC机 | IPv4 Address | Subnet Mask | VLAN ID |
| :---- | :---- | :---- | :----: |
| PC0 | 192.168.0.10 | 255.255.255.0 | 1 |
| PC1 | 192.168.0.2 | 255.255.255.0 | 1 |
| PC2 | 192.168.0.3 | 255.255.255.0 | 1 |
| PC3 | 192.168.0.4 | 255.255.255.0 | 2 |
| PC4 | 192.168.0.5 | 255.255.255.0 | 2 |
| PC5 | 192.168.0.6 | 255.255.255.0 | 3 |
| PC6 | 192.168.0.7 | 255.255.255.0 | 3 |
| PC8 | 192.168.0.8 | 255.255.255.0 | 2 |
| PC9 | 192.168.0.9 | 255.255.255.0 | 2 |


## 三、实验过程
---


### （1）单集线器
#### 进行以太网组网
首先将工作区设置为`logical`工作模式，在此工作模式下，工作区中将显示各个设备的逻辑连接状况和拓扑结构。

在设备类型中选择`Network Devices`，子类型选择`Hubs`。这时候设备列表将显示不同型号的集线器。选择其中的第一个集线器并拖曳到工作区。

按照与选择集线器同样的方式，在设备选择区选择`End Devices`，在工作区放置两台PC机；为了将主机与集线器进行连接，需要在设备选择区选择`Connections`，在设备列表给出的连接中，本次我选择的是自动连接，就是会自动选择是直通双绞线还是交叉双绞线，如果连接正确则线路的两端会出现绿色的圆点。

最终单集线器的拓扑图如下所示：

![单集线器拓扑图](https://i.imgtg.com/2022/10/13/JTiwa.png)


#### 设备的配置和连通性测试
完成网络连接后需要进行连通性测试。和真实环境下类似，需要使用`ping`命令，所以需要对其的`IP`地址进行配置。

首先单击其中一个设备，会弹出配置和属性界面，选择`Desktop`标签，则会出现如下图所示的`IP`配置功能界面：

![IP配置功能界面](https://img1.imgtp.com/2022/10/13/UjiKumIy.png)

单击`IP Configuration`，系统进入网址配置界面，只需要在`192.168.0.1——192.168.0.254`中随便选择一个网络地址填入`IP Address`的地址框即可，并且每一个主机需要选择不同的网络地址，同时在`Subnet Mask`中填入`255.255.255.0`，配置完成后返回即可，配置界面如下图所示：

![网络地址配置](https://i.imgtg.com/2022/10/13/JTs86.png)

配置完两台主机的地址后，就可以测试网络的连通性了，需要在一个主机上开启`Command Prompt`，使用`ping`命令来连接另外一台主机，在本次实验中，我对两台主机都分别使用`ping`进行了测试，如以下两张图片所示：

![ping1](https://i.imgtg.com/2022/10/13/JTN6C.png)

![ping2](https://i.imgtg.com/2022/10/13/JTrkL.png)

可以观察到两台机器都能与另外一台机器建立相应的连接。


#### 模拟数据包的收发过程

由于在真实环境下不能观察到数据包传递的全过程，但是在本次实验所用到的虚拟仿真环境中可以有`Simulation`模式，此模式下的`Event List`列出了数据包的发送设备、接收设备和数据包的类型，单击其中的数据包还可以观察到相应的内容和对它的处理过程，如下图所示：

![Event List](https://i.imgtg.com/2022/10/20/PqOOp.png)

在此模式下通过`ping`命令测试网络的联通性，观察数据包的传播过程以及相应的内容。

### （2）多集线器
#### 进行以太网组网
在进行完单集线器的组网过程之后，基本上对多集线器的组网就也差不多了，工作区依然设置为`logical`工作模式；在设备类型中选择`Network Devices`，子类型选择`Hubs`，对于多集线器本人设置了跟课堂上讲述相类似的四个集线器。

按照与单集线器同样的方式，在设备选择区选择`End Devices`，多集线器中本人在工作区放置了六台PC机；连接线的操作也和单集线器相同，选择自动连接。

最终多集线器的拓扑图如下所示：


![多集线器拓扑图](https://i.imgtg.com/2022/10/13/JT1nS.png)


#### 设备的配置和连通性测试
对于网络配置方面，多集线器的配置操作与单集线器完全一样，需要注意的是不能有任何两台机器的`IP`网址相同，各个`PC`机的网络地址已经在前期准备的表格中列出，这里就不再赘述。

由于在单集线器处已经进行了一个集线器的测试，这里只针对在不同集线器下的机器进行`ping`测试，本人选择的是`PC1`和`PC5`进行连接测试，结果如下图所示：

![ping](https://i.imgtg.com/2022/10/13/JT7DN.png)



#### 模拟数据包的收发过程

在`Simulation`模式下用PC1去ping主机PC6可以观察到如下过程：

首先数据报从PC1发出，如下图所示：


![1](https://i.imgtg.com/2022/10/13/JTApi.png)


然后由Hub0进行转发，转发到Hub3和PC2，由于目的主机并不是PC2，所以并不会回信息，如下图所示：


![2](https://i.imgtg.com/2022/10/13/JTKYX.png)


接下来由Hub3进行转发到Hub1和Hub2，如下图：



![3](https://i.imgtg.com/2022/10/13/JTv5t.png)

此时数据报会分别由两个集线器转发到自己所连接的主机上，这个时刻是同时进行的：


![4](https://i.imgtg.com/2022/10/13/JTyKx.png)


由于此次只有一个目的主机为PC6，所以只有PC6会往回发信息：

![5](https://i.imgtg.com/2022/10/13/JTgSj.png)

最后按照原路，返还信息给PC1:


![6](https://i.imgtg.com/2022/10/13/JTmwp.png)

整个ping的过程到此结束。

### (3)单交换机

#### 进行以太网组网

仿照单集线器的组网过程，对单交换机进行组网，工作区依然设置为`logical`工作模式；在设备类型中选择`Switches`，子类型选择`2960`。

按照与单集线器同样的方式，在设备选择区选择`End Devices`，单交换机中中本人在工作区放置了七台PC机，其中一台是控制交换机的；连接线的操作也和单集线器相同，选择自动连接。

对于交换机来说，需要为期配置主机，并用串口线将该主机的`RS-232`串行口与交换机的`Console`端口进行连接。

最终单交换机的拓扑图如下所示：


![多集线器拓扑图](https://i.imgtg.com/2022/10/20/Pqquv.png)



#### 设备的配置和连通性测试

首先在交换机的config模式下新增两个VLAN，如下图所示：

![交换机VLAN](https://i.imgtg.com/2022/10/20/P5Ogg.png)

然后按照第二节前期准备中单交换机的表格来对各个主机进行局域网的配置，配置方法已在前文讲述，这里就不再赘述。

接下来进行连通性测试，首先测试一个局域网中的主机，用PC1去ping主机PC2，连通性测试成功，如下图所示：

![](https://i.imgtg.com/2022/10/20/P5BQa.png)


然后测试不同VLAN中的主机是否能ping通，如果不能连接上则代表成功，用PC1去ping主机PC3，运行结果如下图所示：

![](https://i.imgtg.com/2022/10/20/P5FgX.png)

可以看出显示的结果代表VLAN设置成功。



#### 模拟数据包的收发过程



在`Simulation`模式下用PC1去ping主机PC2可以观察到如下过程：


首先，一个数据报从PC1中传输出来，经过交换机后，由于有VLAN的限制，所以只会给同一个局域网的PC2发送，如下图：

![](https://i.imgtg.com/2022/10/20/P5hVt.png)

接下来当PC2返还消息的时候，也只会通过交换机给PC1发送：

![](https://i.imgtg.com/2022/10/20/P5nqx.png)

所以在仿真模式下测试成功。






### (4)多交换机

#### 进行以太网组网

仿照单交换机的组网，多交换机的组网其实就是把这一部分复制到另一边，工作区依然设置为`logical`工作模式。

按照与单集线器同样的方式，在设备选择区选择`End Devices`，单交换机中中本人在工作区放置了11台PC机，其中有两台是控制交换机的；连接线的操作也和单交换机相同，选择自动连接。

仿照单交换机，为期另外一台交换机配置主机，并用串口线将该主机的`RS-232`串行口与交换机的`Console`端口进行连接。

最终多交换机的拓扑图如下所示：


![多交换机拓扑图](https://i.imgtg.com/2022/10/20/PTge1.png)



#### 设备的配置和连通性测试

首先左边部分的交换机配置方法与单交换机中一摸一样，在右边的交换机的config模式下新增一个VLAN，然后按照第二节前期准备中多交换机的表格来对各个主机进行局域网的配置，配置方法已在前文讲述，这里就不再赘述，为了观察方便，让处在同一个虚拟局域网的主机处于同一行中。

这里主要的难点是对两个交换机所连接的VLAN怎么统一，在网上搜索相关资料后可以知道可以讲一个端口设置为trunk模式，这样就实现了交换机的VLAN的统一，如拓扑图中所展示的，本人将两个交换机的f0/10端口都设置为trunk，实现了虚拟局域网的统一。

接下来进行连通性测试，因为在单交换机中已经测试过一个交换机内部的通信，所以这里测试不同交换机的通信，用PC0去ping主机PC1，连通性测试成功，如下图所示：

![](https://i.imgtg.com/2022/10/20/PWUKX.png)

然后测试不同交换机之间的不同VLAN中的主机是否能ping通，如果不能连接上则代表成功，用PC0去ping主机PC3，运行结果如下图所示：

![](https://i.imgtg.com/2022/10/20/PWTBi.png)

可以看出显示的结果代表不同交换机之间的VLAN设置成功。



#### 模拟数据包的收发过程

本节演示一个ping通的样例，在`Simulation`模式下用PC0去ping主机PC1可以观察到如下过程：



首先数据报通过PC0发送出去 发送给交换机Switch1:

![1](https://i.imgtg.com/2022/10/20/PWkMx.png)


接下来由Switch1判断虚拟局域网，来判断应该发送给那个地方，在判断后可以知道发送给了交换机Switch0:


![2](https://i.imgtg.com/2022/10/20/PWx1j.png)



接下来Switch0判断跟PC0在同一个虚拟局域网中的机器，在判断完成后发送给了PC1和PC2:


![3](https://i.imgtg.com/2022/10/20/PWzHp.png)


由于此时ping的是主机PC1，所以只有PC1可以进行收发消息，在PC1收到消息后，将信息返回：


![4](https://i.imgtg.com/2022/10/20/PWFXU.png)


同样先由Switch0判断，发送给了Switch1:


![5](https://i.imgtg.com/2022/10/20/PWixY.png)

最后按照原路返回，将信息发送给了PC0:


![6](https://i.imgtg.com/2022/10/20/PWnJv.png)


所以在仿真模式下测试成功。






## 四、特殊现象分析
---

在本次实验中遇到了ICMP包的异常，在问过助教学长后得知在本节课所用的课本中就有对此异常的分析。于是就翻书去了解ICMP的异常概念和解决方法。

在查阅书本后得知，出现该异常的原因有可能是处理速度太慢，不能完成IP数据报排队等日常工作或者是由于传入速率大于传出速率，因为只有在进行集线器的实验报出此种异常，在进行交换机的时候并未出错，所以原因就很明显了，因为使用集线器时，同一时刻传入的数据报太多，导致网络拥塞，造成了ICMP包的异常。




## 五、总结与展望
---

### (1)总结
本次实验是网络技术与应用的第一次实验，一开始对于仿真环境和以太网组网相关知识并不太了解，但是通过动手实验相关步骤后，对于集线器、交换机、环境配置等方面也更加的熟悉；并且在`Simulation`模式下更加的对理论课上数据报的收发过程有了更加深刻的印象，对于VLAN的分配也更加的了解。



### (2)展望
本次实验是与计算机网络课相辅相成的一门课，通过上这门课使得对计算机网络课有些不理解的地方有了更多的感悟，对网络也有了更多的兴趣，期望自己在这学期未来实验的更好的发展。


